/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcocoandeve_styleguides"] = self["webpackChunkcocoandeve_styleguides"] || []).push([["predictive-search"],{

/***/ "./src/js/modules/search-box-abtest.js":
/*!*********************************************!*\
  !*** ./src/js/modules/search-box-abtest.js ***!
  \*********************************************/
/***/ (() => {

eval("/* global Handlebars */\nvar searchNode = $('input[name=q]');\nvar searchClear = $('.search-panel__clear');\nvar searchNoResult = $('.search-panel__no-result');\nvar searchHome = $('.search-panel__home');\nvar searchResult = $('.search-panel__result');\nvar searchTag = $('.search-panel__tag');\nvar SearchBox = {\n  init: function init() {\n    this.inputEventListener();\n  },\n  inputEventListener: function inputEventListener() {\n    var input = searchNode;\n    input.on('keyup', SearchBox.debounce(function (evt) {\n      if (evt.target.value === '') {\n        searchClear.addClass('disabled');\n        searchNoResult.hide();\n      } else {\n        searchClear.removeClass('disabled');\n      }\n\n      SearchBox.search(evt.target.value);\n    }, 500));\n    SearchBox.keywordListener(input);\n    searchClear.on('click', function () {\n      SearchBox.clear();\n    });\n    $('.search-panel__open, .search-panel__close').on('click', function (e) {\n      e.preventDefault();\n      SearchBox.searchBoxToggle();\n    });\n    $('.nav-item--mega-menu').hover(function () {\n      if (SearchBox.isSearchOpen()) {\n        SearchBox.searchBoxToggle();\n      }\n    });\n  },\n  isSearchOpen: function isSearchOpen() {\n    return $('.search-panel').hasClass('show');\n  },\n  searchBoxToggle: function searchBoxToggle() {\n    $('header').removeClass('overflow-hidden');\n    $('.search-panel').toggleClass('show');\n    $('body').toggleClass('search-panel-active');\n\n    if (SearchBox.isSearchOpen()) {\n      $('.search-panel input[name=\"q\"]').focus();\n      $('.main-header').addClass('scrolled-up').removeClass('scrolled-down');\n    }\n  },\n  keywordListener: function keywordListener(input) {\n    searchTag.on('click', function (evt) {\n      input.val(evt.target.textContent);\n      SearchBox.search(evt.target.textContent);\n      searchClear.removeClass('disabled');\n    });\n  },\n  search: function search(keyword) {\n    SearchBox.loading(true);\n    searchNoResult.hide();\n    searchHome.hide();\n    searchResult.hide();\n\n    if (keyword === '') {\n      SearchBox.loading(false);\n      searchResult.hide();\n\n      if (!$('body').hasClass('search-feature-without-suggestion-abtest-active')) {\n        searchHome.show();\n      }\n\n      return;\n    }\n\n    searchResult.show();\n    SearchBox.loading(false);\n    /*\n    jQuery.getJSON('/search/suggest.json', {\n    \tq: keyword,\n    \tresources: {\n    \t\ttype: 'product',\n    \t\toptions: {\n    \t\t\tunavailable_products: 'last',\n    \t\t\tfields: 'tag,title',\n    \t\t},\n    \t},\n    }).done(function (response) {\n    \tconst productSuggestions = response.resources.results.products;\n    \tif (productSuggestions.length > 0) {\n    \t\tSearchBox.buildResult(productSuggestions);\n    \t\tsearchResult.show();\n    \t\tSearchBox.loading(false);\n    \t\t// ga('send', 'event', 'ProductSearch', 'SearchKeyword', keyword);\n    \t\t// if (dataLayer) {\n    \t\t// \tdataLayer.push({event: 'ProductSearch', search_term: keyword});\n    \t\t// }\n    \t} else {\n    \t\tsearchNoResult.show();\n    \t\tsearchHome.show();\n    \t\tSearchBox.loading(false);\n    \t}\n    });\n    */\n  },\n  buildResult: function buildResult(results) {\n    var $searchContainer = $('#search-products .carousel-inner');\n    $searchContainer.empty();\n    var items = [];\n    var source = $('#searchRowTemplate').html();\n    var template = Handlebars.compile(source);\n    var resultsFiltered = results.filter(function (i) {\n      return i.type === 'HERO' || i.type === 'BUNDLE';\n    });\n    $.each(resultsFiltered, function (index, item) {\n      var range = 'Aussie Skincare Essentials';\n\n      if (item.title.includes('Tasmanian Spring Water')) {\n        range = 'Tasmanian Spring Water';\n      } else if (item.title.includes('Australian Pink Clay')) {\n        range = 'Australian Pink Clay';\n      } else if (item.title.includes('Australian Emu Apple')) {\n        range = 'Australian Emu Apple';\n      }\n\n      var itemRow = {\n        product_id: item.id,\n        img: item.image,\n        title: item.title.replace(range, ''),\n        handle: item.handle,\n        price: item.price,\n        url: item.url,\n        range: range\n      };\n      items.push(itemRow);\n    });\n    var info = 0;\n    var resultHeading = $searchContainer.attr('data-heading');\n\n    if (resultsFiltered.length > 0) {\n      info = resultHeading.replace('_total_', results.length);\n    }\n\n    var data = {\n      items: items\n    };\n    SearchBox.loading(false);\n    $searchContainer.append(template(data));\n    $('#search-result-heading').html(info);\n  },\n  debounce: function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n      var context = this; // eslint-disable-next-line prefer-rest-params\n\n      var args = arguments;\n      clearTimeout(timeout);\n      timeout = setTimeout(function () {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      }, wait);\n      if (immediate && !timeout) func.apply(context, args);\n    };\n  },\n  loading: function loading(state) {\n    if (state) {\n      $('.lds-ring').addClass('active');\n      $('.search-nav__footer').hide();\n    } else {\n      $('.lds-ring').removeClass('active');\n      $('.search-nav__footer').show();\n    }\n  },\n  clear: function clear() {\n    searchNode.val('');\n    searchResult.hide();\n    searchClear.addClass('disabled');\n    searchNoResult.hide();\n\n    if (!$('body').hasClass('search-feature-without-suggestion-abtest-active')) {\n      searchHome.show();\n    }\n  },\n  panelToggle: function panelToggle() {\n    $('.mega-search-wrapper').toggleClass('active');\n    $('body').toggleClass('body-search-open');\n\n    if ($('.mega-search-wrapper').hasClass('active')) {\n      document.getElementById('searchq').focus();\n    }\n  }\n};\n$(document).ready(function () {\n  SearchBox.init();\n}); // SEARCH BOX CAROUSEL SCROLL\n\nvar carousels = [];\n\nvar adjustScrollThumb = function adjustScrollThumb(thumb, inner, scrollParent) {\n  var innerOuterWidth;\n\n  if ($(inner).closest('.instagram-carousel').length > 0) {\n    // instagram scroll bugfix: out of container\n    // round to 1 decimal of item width\n    var itemWidth = Math.round($(inner).find('.carousel-item').outerWidth() * 10) / 10; // instagram total images from instagram.js\n\n    innerOuterWidth = itemWidth * 15;\n  } else {\n    innerOuterWidth = inner.scrollWidth;\n  } // eslint-disable-next-line no-param-reassign\n\n\n  thumb.style.width = \"\".concat(inner.clientWidth / innerOuterWidth * 100, \"%\"); // eslint-disable-next-line no-param-reassign\n\n  thumb.style.left = \"\".concat(inner.scrollLeft / inner.scrollWidth * 100, \"%\");\n\n  if (inner.clientWidth === inner.scrollWidth) {\n    inner.classList.add('justify-content-center');\n    scrollParent.classList.add('d-none');\n  } else {\n    inner.classList.remove('justify-content-center');\n    scrollParent.classList.remove('d-none');\n  }\n};\n\nwindow.addEventListener('resize', function () {\n  carousels.forEach(function (s) {\n    return s.dispatchEvent(new CustomEvent('adjustThumb'));\n  });\n});\n$('.carousel--scroll').each(function (index, carousel) {\n  var inner = carousel.querySelector('.carousel-inner');\n  var scrollbar = carousel.querySelector('.scrollbar');\n  var scrollThumb = carousel.querySelector('.scrollbar--thumb');\n  var prevButton = carousel.querySelector('.carousel-control-prev');\n  var nextButton = carousel.querySelector('.carousel-control-next');\n\n  if (scrollbar) {\n    carousel.addEventListener('adjustThumb', function () {\n      adjustScrollThumb(scrollThumb, inner, scrollbar.parentNode);\n    });\n    if (scrollThumb) adjustScrollThumb(scrollThumb, inner, scrollbar.parentNode);\n  }\n\n  carousels.push(carousel);\n  var x = 0;\n  var left = 0;\n  var itemIndex = 0;\n\n  var checkButton = function checkButton() {\n    if (inner.scrollLeft === 0) {\n      if (!$(prevButton).hasClass('carousel-control-prev--always-show')) {\n        $(prevButton).addClass('d-none');\n      } else {\n        $(prevButton).addClass('disabled');\n      }\n    } else if (!$(prevButton).hasClass('carousel-control-prev--always-show')) {\n      $(prevButton).removeClass('d-none');\n    } else {\n      $(prevButton).removeClass('disabled');\n    }\n\n    if (inner.scrollLeft + inner.clientWidth === inner.scrollWidth) {\n      if (!$(nextButton).hasClass('carousel-control-prev--always-show')) {\n        $(nextButton).addClass('d-none');\n      } else {\n        $(nextButton).addClass('disabled');\n      }\n    } else if (!$(nextButton).hasClass('carousel-control-prev--always-show')) {\n      $(nextButton).removeClass('d-none');\n    } else {\n      $(nextButton).removeClass('disabled');\n    }\n  };\n\n  if (scrollThumb) {\n    checkButton();\n  }\n\n  var innerDrag = function innerDrag(e) {\n    inner.scrollLeft = left - (e.pageX || e.touches[0].pageX) + x;\n    if (scrollThumb) scrollThumb.style.left = \"\".concat(inner.scrollLeft / inner.scrollWidth * 100, \"%\");\n    checkButton();\n  };\n\n  var scrollDrag = function scrollDrag(e) {\n    inner.scrollLeft = left + ((e.pageX || e.touches[0].pageX) - x) * (inner.scrollWidth / scrollbar.clientWidth);\n    if (scrollThumb) scrollThumb.style.left = \"\".concat(inner.scrollLeft / inner.scrollWidth * 100, \"%\");\n    checkButton();\n  };\n\n  inner.addEventListener('scroll', function () {\n    if (scrollThumb) scrollThumb.style.left = \"\".concat(inner.scrollLeft / inner.scrollWidth * 100, \"%\");\n    checkButton();\n  });\n\n  var eventStart = function eventStart(e) {\n    e.preventDefault();\n    x = e.pageX || e.touches[0].pageX;\n    left = inner.scrollLeft;\n    document.addEventListener(e.type === 'mousedown' ? 'mousemove' : 'touchmove', e.target === scrollThumb ? scrollDrag : innerDrag);\n  };\n\n  inner.addEventListener('mousedown', eventStart, true);\n\n  if (scrollThumb) {\n    scrollThumb.addEventListener('mousedown', eventStart, true);\n    scrollThumb.addEventListener('touchstart', eventStart, true);\n    scrollThumb.addEventListener('mousedown', eventStart, true);\n    scrollThumb.addEventListener('touchstart', eventStart, true);\n  }\n\n  document.addEventListener('mouseup', function () {\n    document.removeEventListener('mousemove', innerDrag);\n    document.removeEventListener('mousemove', scrollDrag);\n  });\n  document.addEventListener('touchend', function () {\n    document.removeEventListener('touchmove', innerDrag);\n    document.removeEventListener('touchmove', scrollDrag);\n  });\n\n  var scrollItem = function scrollItem(direction) {\n    return function (e) {\n      e.preventDefault();\n      var item = carousel.querySelector('.carousel-item');\n      var itemToScroll = $(carousel).parent().hasClass('review-carousel') || $(carousel).parent().hasClass('instagram-carousel') ? 1 : 2;\n      itemIndex = Math.round(inner.scrollLeft / item.clientWidth) + (direction === 'left' ? -itemToScroll : itemToScroll);\n      left = itemIndex * item.clientWidth;\n      if (left < 0) left = 0;else if (left > inner.scrollWidth - inner.clientWidth) left = inner.scrollWidth - inner.clientWidth;\n      $(inner).animate({\n        scrollLeft: left\n      }, 300);\n      $(scrollThumb).animate({\n        left: \"\".concat(left / inner.scrollWidth * 100, \"%\")\n      }, 300);\n    };\n  };\n\n  if (prevButton) {\n    prevButton.addEventListener('mousedown', scrollItem('left'));\n  }\n\n  if (nextButton) {\n    nextButton.addEventListener('mousedown', scrollItem('right'));\n  }\n});\nvar searchPanelScroll = document.getElementById('searchPanel');\n\nvar addScrollPixel = function addScrollPixel() {\n  if (searchPanelScroll.scrollTop === 0) {\n    // element is at the top of its scroll position, so scroll 1 pixel down\n    searchPanelScroll.scrollTop = 1;\n  }\n\n  if (searchPanelScroll.scrollHeight - searchPanelScroll.scrollTop === searchPanelScroll.clientHeight) {\n    // element is at the bottom of its scroll position, so scroll 1 pixel up\n    searchPanelScroll.scrollTop -= 1;\n  }\n};\n\nif (window.addEventListener) {\n  // Avoid just launching a function on every scroll event as it could affect performance.\n  // You should add a \"debounce\" to limit how many times the function is fired\n  searchPanelScroll.addEventListener('scroll', addScrollPixel, true);\n} else if (window.attachEvent) {\n  searchPanelScroll.attachEvent('scroll', addScrollPixel);\n}\n\n//# sourceURL=webpack://cocoandeve-styleguides/./src/js/modules/search-box-abtest.js?");

/***/ })

}]);